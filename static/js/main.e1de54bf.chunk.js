(this["webpackJsonpshows-in-town"]=this["webpackJsonpshows-in-town"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(13),i=n.n(r),s=(n(18),n(3)),o=n(2),l=n(0),u=function(){return Object(l.jsx)("input",{type:"date",onChange:function(e){var t=String(new Date(e.target.value).setHours(24,0,0,0)),n=Object(s.a)(document.querySelectorAll(".dayHeader")).map((function(e){return e.id})).sort((function(e,t){return e-t}));if(n.includes(t))document.getElementById(t).scrollIntoView();else{+t<n[0]&&document.getElementsByTagName("h1")[0].scrollIntoView();for(var c=0;c<n.length;c++)t>n[c]&&t<n[c+1]&&document.getElementById(n[c+1]).scrollIntoView()}},"aria-label":"Jump to date",title:"Jump to date"})},j=function(e){var t=e.epoch,n=new Date,c=new Date(t),a=new Date(t).setHours(0,0,0,0);return Object(l.jsxs)("header",{className:"dayHeader",id:a,children:[Object(l.jsx)("div",{}),Object(l.jsx)("h2",{children:n.getFullYear()===c.getFullYear()&&n.getMonth()===c.getMonth()&&n.getDate()===c.getDate()?"Today":function(){var e={weekday:"long",month:"long",day:"numeric"};return c.getFullYear()!==n.getFullYear()&&(e.year="numeric"),c.toLocaleDateString("en-us",e)}()}),Object(l.jsx)("div",{})]})},d=function(e){var t=e.data;return Object(l.jsxs)("article",{children:[Object(l.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:Object(l.jsx)("h3",{children:t.title})}),Object(l.jsxs)("p",{className:"event-address",children:[Object(l.jsx)("span",{children:t.venue})," - ",t.address]}),Object(l.jsx)("p",{className:"event-time",children:t.time}),Object(l.jsx)("p",{className:"event-description",children:t.desc})]})},b=n(9),f=n.n(b),h=function(e){var t=e.setIsLoading,n=e.setEvents,r=e.events,i=e.setUniqueLocations;Object(c.useEffect)((function(){fetch("https://shows-in-town.s3.us-east-2.amazonaws.com/events.json").then((function(e){return e.json()})).then((function(e){e.sort((function(e,t){return e.epoch-t.epoch})),n(e),t(!1);var c=Object(s.a)(new Set(e.map((function(e){return e.venue})))),a=c.filter((function(e,t){return 0===c.filter((function(n,c){return c>t&&f.a.compareTwoStrings(e,n)>.9})).length}));a.sort((function(e,t){var n=e.replace(/^(a |the |an )/i,""),c=t.replace(/^(a |the |an )/i,"");return n.localeCompare(c)})),i(a)})).catch((function(e){console.log(e),t(!1)}))}),[]);return Object(l.jsxs)(l.Fragment,{children:[r&&r.map((function(e,t){return!(e.epoch<new Date((new Date).setHours(0,0,0,0)))&&(0===t||function(e,t){var n=new Date(t),c=new Date(e);return n.getFullYear()!==c.getFullYear()||n.getMonth()!==c.getMonth()||n.getDate()!==c.getDate()}(e.epoch,r[t-1].epoch)?Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)(j,{epoch:e.epoch}),Object(l.jsx)(d,{data:e})]},t):Object(l.jsx)(d,{data:e},t))})),r&&Object(l.jsx)("p",{className:"noMoreEvents",children:"-no more events to show - check back later-"})]})},O=function(e){var t=e.expandedSection,n=e.setExpandedSection;return Object(l.jsx)("button",{className:"filter-button","aria-label":"Filter",title:"Filter",onClick:function(){n("filter-options"===t?null:"filter-options")},children:Object(l.jsx)("svg",{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 1000 1000",children:Object(l.jsx)("path",{d:"M981.4,50.7c-15.5-29.2-39.5-43-72.2-43c-135.8,0-273.4,0-409.2,0c-51.6,0-103.2,0-154.7,0c-86,0-171.9,0-257.9,0c-43,0-72.2,25.8-77.4,67.1c0,3.4,1.7,10.3,3.4,12C121.8,210.6,230.1,331,340.1,453c5.2,5.2,6.9,10.3,6.9,18.9c0,113.5,0,225.2,0,338.7c0,49.9,24.1,87.7,68.8,110c30.9,15.5,63.6,25.8,94.6,39.5c25.8,10.3,49.9,20.6,75.6,29.2c25.8,8.6,49.9-3.4,58.5-25.8c3.4-8.6,5.2-20.6,5.2-30.9c0-153,0-306,0-459.1c0-6.9,1.7-12,6.9-17.2c39.5-44.7,80.8-89.4,120.4-134.1c68.8-77.4,139.3-154.7,208-232.1c1.7-1.7,5.2-6.9,5.2-10.3C986.6,69.6,986.6,59.3,981.4,50.7z M878.2,95.4C792.3,190,708,284.6,622.1,379.1c-1.7,1.7-22.4,22.4-48.1,46.4c0,144.4,0,340.4,0,476.2c-3.4-1.7-6.9-1.7-8.6-3.4c-36.1-13.8-72.2-29.2-108.3-43c-22.4-8.6-32.7-25.8-32.7-49.9c0-110,0-220.1,0-331.8c0-1.7,0-25.8,0-48.1c-24.1-24.1-44.7-43-46.4-44.7c-89.4-96.3-175.4-194.3-263.1-290.6c-1.7-1.7-3.4-3.4-5.2-6.9c259.6,0,517.5,0,778.8,0C883.4,88.6,881.7,92,878.2,95.4z"})})})},p=n(10),v=n(5),x=function(e){var t=e.uniqueLocations,n=e.filterTimeline,a=e.isVisible,r=Object(c.useState)(!1),i=Object(o.a)(r,2),s=i[0],u=i[1],j=Object(c.useState)({locations:[]}),d=Object(o.a)(j,2),b=d[0],f=d[1],h=function(e){var t=Object(v.a)(Object(v.a)({},b),{},Object(p.a)({},e,[]));f(t),n(t),document.querySelectorAll("#".concat(e,"-fields input")).forEach((function(e){return e.checked=!1}))};return Object(l.jsxs)("form",{style:{display:a?"grid":"none"},id:"filters",children:[Object(l.jsxs)("fieldset",{id:"filter-by",children:[Object(l.jsx)("legend",{children:"Filter By"}),Object(l.jsxs)("label",{htmlFor:"locations",children:["Venue",Object(l.jsx)("input",{type:"checkbox",id:"locations",name:"filter-category",value:"locations",onClick:function(e){e.target.checked?u(e.target.value):(u(!1),h(e.target.value))}})]})]}),"locations"===s&&Object(l.jsxs)("fieldset",{id:"locations-fields",children:[Object(l.jsx)("legend",{children:"Location"}),Object(l.jsxs)("label",{htmlFor:"clear-all-locations",children:[Object(l.jsx)("input",{type:"checkbox",id:"clear-all-locations",value:"clear-all-locations",onClick:function(e){return h("locations")}}),"Clear all location filters (see all locations)"]}),t.map((function(e,t){return Object(l.jsxs)("label",{htmlFor:"location"+t,children:[Object(l.jsx)("input",{type:"checkbox",id:"location"+t,value:e,onClick:function(e){return function(e,t){var c=Object(v.a)({},b);t.target.checked&&!c[e].includes(t.target.value)?c[e].push(t.target.value):c[e]=c[e].filter((function(e){return e!==t.target.value})),f(c),n(c)}("locations",e)}}),e]},t)}))]})]})},m=n(7),g=n(12),w=function(e){var t=e.children,n=Date.now(),a=navigator.userAgent,r=Object(c.useState)(null),i=Object(o.a)(r,2),u=i[0],j=i[1];Object(c.useEffect)((function(){var e=function(){var e=Object(g.a)(Object(m.a)().mark((function e(){var t,n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"c0ed918b293a8b219647d2f7f0740aa10629b0628bc44f389d5dcaab",e.next=3,fetch("https://api.ipdata.co?api-key=".concat("c0ed918b293a8b219647d2f7f0740aa10629b0628bc44f389d5dcaab"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,j(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var d=Object(c.useState)([]),b=Object(o.a)(d,2),f=b[0],h=b[1];Object(c.useEffect)((function(){["click","scroll"].forEach((function(e){window.addEventListener(e,(function(e){!function(e){var t={type:e.type,target:e.target,time:Date.now()-n};h((function(e){return[].concat(Object(s.a)(e),[t])}))}(e)}))}))}),[]);var O=function(){var e=Date.now()-n;return{userAgent:a,timeOnPage:e,ipData:u,events:f}};return Object(c.useEffect)((function(){window.addEventListener("beforeunload",function(){var e=Object(g.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=O(),fetch("https://z32mbfotsov62vonmya6xsnyz40lydhm.lambda-url.us-east-2.on.aws/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(l.jsx)(l.Fragment,{children:t instanceof Array?Object(v.a)({},t):t})},y=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(o.a)(r,2),j=i[0],d=i[1],b=Object(c.useState)(null),p=Object(o.a)(b,2),v=p[0],m=p[1],g=Object(c.useState)(null),y=Object(o.a)(g,2),S=y[0],k=y[1],D=Object(c.useState)(null),E=Object(o.a)(D,2),F=E[0],L=E[1];return Object(l.jsx)(w,{children:Object(l.jsxs)("main",{className:n?"loading":"",children:[Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"Shows In Town"}),Object(l.jsx)("hr",{}),n&&Object(l.jsx)("p",{className:"subtitle",children:"Finding live music in Louisville..."}),!n&&Object(l.jsxs)("div",{className:"subheading",children:[Object(l.jsx)("p",{className:"subtitle",children:"live music in Louisville"}),Object(l.jsxs)("div",{className:"options-wrapper",children:[Object(l.jsx)(O,{expandedSection:S,setExpandedSection:k}),Object(l.jsx)(u,{})]})]})]}),Object(l.jsx)("section",{id:"expanded-section",children:Object(l.jsx)(x,{uniqueLocations:F,filterTimeline:function(e){var t=Object(s.a)(j);e.locations.length>0&&(t=t.filter((function(t){return e.locations.includes(t.venue)||e.locations.some((function(e){return f.a.compareTwoStrings(e,t.venue)>.9}))}))),m(t)},isVisible:"filter-options"===S})}),Object(l.jsx)(h,{setIsLoading:a,setEvents:d,events:v||j,setUniqueLocations:L}),!n&&Object(l.jsx)("a",{href:"#top",id:"topLink",children:"Top \u2191"})]})})};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.e1de54bf.chunk.js.map