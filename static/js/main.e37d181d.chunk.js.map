{"version":3,"sources":["components/Datepicker.js","components/DayHeader.js","components/Event.js","components/Timeline.js","components/Filter.js","components/FilterOptions.js","components/DataCollector.js","App.js","index.js"],"names":["Datepicker","type","onChange","e","selectedEpoch","String","Date","target","value","setHours","headerIds","document","querySelectorAll","map","header","id","sort","a","b","includes","getElementById","scrollIntoView","getElementsByTagName","i","length","title","DayHeader","epoch","now","thisEventDate","headerId","className","getFullYear","getMonth","getDate","options","weekday","month","day","year","toLocaleDateString","formatDate","Event","data","href","link","rel","venue","address","time","desc","Timeline","setIsLoading","setEvents","events","setUniqueLocations","useEffect","fetch","then","res","json","allLocations","Set","event","uniqueLocations","filter","location","index","location2","index2","stringSimilarity","compareTwoStrings","aNoArticle","replace","bNoArticle","localeCompare","catch","err","console","log","prevEpoch","prevEventDate","isNewDay","Fragment","Filter","expandedSection","setExpandedSection","onClick","version","x","y","viewBox","d","FilterOptions","filterTimeline","isVisible","useState","filterCategory","setFilterCategory","locations","params","setParams","clearCategory","category","newParams","forEach","input","checked","style","display","htmlFor","name","push","item","handleClick","DataCollector","children","timeOfPageLoad","userAgent","navigator","ipData","setIpData","fetchIpData","response","eventType","window","addEventListener","prevEvents","recordEvent","sendData","userData","timeOnPage","makeUserDataObject","method","headers","body","JSON","stringify","keepalive","removeEventListener","Array","App","isLoading","filteredEvents","setFilteredEvents","eventsArr","some","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.e37d181d.chunk.js","sourcesContent":["const Datepicker = () => {\r\n\r\n\tconst jumpToDate = (e) => {\r\n\t\tconst selectedEpoch = String(new Date(e.target.value).setHours(24,0,0,0))\r\n\t\t\r\n\t\t// Get sorted array of all day header ids\r\n\t\tconst headerIds = [...document.querySelectorAll('.dayHeader')]\r\n\t\t\t.map(header => header.id)\r\n\t\t\t.sort((a,b) => a - b)\r\n\r\n\t\t// Scroll to selected or nearest date \r\n\t\tif (headerIds.includes(selectedEpoch)) {\r\n\t\t\tdocument.getElementById(selectedEpoch).scrollIntoView()\r\n\t\t} else {\r\n\t\t\tif (+selectedEpoch < headerIds[0]) document.getElementsByTagName('h1')[0].scrollIntoView()\r\n\r\n\t\t\tfor (let i = 0; i < headerIds.length; i++) {\r\n\t\t\t\tif (selectedEpoch > headerIds[i] && selectedEpoch < headerIds[i+1]){\r\n\t\t\t\t\tdocument.getElementById(headerIds[i+1]).scrollIntoView()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn (<input type='date' onChange={jumpToDate} aria-label='Jump to date' title='Jump to date'/>)\r\n}\r\n\r\nexport default Datepicker;","import React from 'react';\r\n\r\nconst DayHeader = ({ epoch }) => {\r\n\tconst now = new Date()\r\n\tconst thisEventDate = new Date(epoch)\r\n\tconst headerId = new Date(epoch).setHours(0,0,0,0)\r\n\t\r\n\tconst formatDate = () => {\r\n\t\tconst options = { weekday: 'long', month: 'long', day: 'numeric' }\r\n\t\t\r\n\t\t// Only display the year if not this year\r\n\t\tif (thisEventDate.getFullYear() !== now.getFullYear())  options.year = 'numeric'\r\n\t\t\r\n\t\treturn thisEventDate.toLocaleDateString('en-us', options)\r\n\t}\r\n\r\n\tconst isToday = () => {\r\n\t\treturn now.getFullYear() === thisEventDate.getFullYear() \r\n\t\t&& now.getMonth() === thisEventDate.getMonth() \r\n\t\t&& now.getDate() === thisEventDate.getDate()\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<header className='dayHeader' id={headerId}>\r\n\t\t\t<div></div>\r\n\t\t\t<h2>{isToday() ? 'Today' : formatDate()}</h2>\r\n\t\t\t<div></div>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default DayHeader;","import React from 'react';\r\n\r\nconst Event = ({ data }) => {\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<a href={data.link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t<h3>{data.title}</h3>\r\n\t\t\t</a>\r\n\t\t\t<p className='event-address'><span>{data.venue}</span> - {data.address}</p>\r\n\t\t\t<p className='event-time'>{data.time}</p>\r\n\t\t\t<p className='event-description'>{data.desc}</p>\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nexport default Event;","import React, { useEffect } from 'react';\r\nimport DayHeader from './DayHeader';\r\nimport Event from './Event';\r\nimport stringSimilarity from 'string-similarity';\r\n\r\nconst Timeline = ({ setIsLoading, setEvents, events, setUniqueLocations}) => {\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch('https://shows-in-town.s3.us-east-2.amazonaws.com/events.json')\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\t// Set fetched data and falsify loading status\r\n\t\t\t\tres.sort((a, b) => {return a.epoch-b.epoch});\r\n\t\t\t\tsetEvents(res)\r\n\t\t\t\tsetIsLoading(false)\r\n\r\n\t\t\t\t// Get all unique locations\r\n\t\t\t\tconst allLocations = [...new Set(res.map(event => event.venue))];\r\n\t\t\t\t\r\n\t\t\t\t// only include one location of groups with 90% similar name\r\n\t\t\t\tconst uniqueLocations = allLocations.filter((location, index) => {\r\n\t\t\t\t\tconst similarLocations = allLocations.filter((location2, index2) => {\r\n\t\t\t\t\t\tif (index2 > index) {\r\n\t\t\t\t\t\t\treturn stringSimilarity.compareTwoStrings(location, location2) > 0.9\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn similarLocations.length === 0\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// Sort unique locations alphabetically ingoring case and leading articles\r\n\t\t\t\tuniqueLocations.sort((a, b) => {\r\n\t\t\t\t\tconst aNoArticle = a.replace(/^(a |the |an )/i, '')\r\n\t\t\t\t\tconst bNoArticle = b.replace(/^(a |the |an )/i, '')\r\n\t\t\t\t\treturn aNoArticle.localeCompare(bNoArticle)\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tsetUniqueLocations(uniqueLocations)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\tconst isNewDay = (epoch, prevEpoch) => {\r\n\t\t// Return true if epoch is not the same day as prevEpoch\r\n\t\tconst prevEventDate = new Date(prevEpoch)\r\n\t\tconst thisEventDate = new Date(epoch)\r\n\t\t\r\n\t\treturn prevEventDate.getFullYear() !== thisEventDate.getFullYear() \r\n\t\t\t|| prevEventDate.getMonth() !== thisEventDate.getMonth() \r\n\t\t\t|| prevEventDate.getDate() !== thisEventDate.getDate()\r\n\t}\r\n\r\n\tconst isPastEvent = (epoch) => {\r\n\t\tconst today = new Date(new Date().setHours(0,0,0,0))\r\n\t\treturn epoch < today\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{events && events.map((event, index) => {\r\n\t\t\t\t// Skip event if it is in the past\r\n\t\t\t\tif (isPastEvent(event.epoch)) return false\r\n\r\n\t\t\t\t// If event is first of its date, render date header\r\n\t\t\t\tif (index === 0 || isNewDay(event.epoch, events[index-1].epoch)) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t\t\t<DayHeader epoch={event.epoch} />\r\n\t\t\t\t\t\t\t<Event data={event} />\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Event data={event} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t{events && <p className='noMoreEvents'>-no more events to show - check back later-</p>}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Timeline;","import React from 'react'\r\n\r\nconst Filter = ({ expandedSection, setExpandedSection }) => {\r\n\t\r\n\tconst showHideFilters = () => {\r\n\t\tif (expandedSection === 'filter-options') {\r\n\t\t\tsetExpandedSection(null)\r\n\t\t} else setExpandedSection('filter-options')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button className='filter-button' aria-label='Filter' title='Filter' onClick={showHideFilters}>\r\n\t\t\t<svg version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t\t<path d=\"M981.4,50.7c-15.5-29.2-39.5-43-72.2-43c-135.8,0-273.4,0-409.2,0c-51.6,0-103.2,0-154.7,0c-86,0-171.9,0-257.9,0c-43,0-72.2,25.8-77.4,67.1c0,3.4,1.7,10.3,3.4,12C121.8,210.6,230.1,331,340.1,453c5.2,5.2,6.9,10.3,6.9,18.9c0,113.5,0,225.2,0,338.7c0,49.9,24.1,87.7,68.8,110c30.9,15.5,63.6,25.8,94.6,39.5c25.8,10.3,49.9,20.6,75.6,29.2c25.8,8.6,49.9-3.4,58.5-25.8c3.4-8.6,5.2-20.6,5.2-30.9c0-153,0-306,0-459.1c0-6.9,1.7-12,6.9-17.2c39.5-44.7,80.8-89.4,120.4-134.1c68.8-77.4,139.3-154.7,208-232.1c1.7-1.7,5.2-6.9,5.2-10.3C986.6,69.6,986.6,59.3,981.4,50.7z M878.2,95.4C792.3,190,708,284.6,622.1,379.1c-1.7,1.7-22.4,22.4-48.1,46.4c0,144.4,0,340.4,0,476.2c-3.4-1.7-6.9-1.7-8.6-3.4c-36.1-13.8-72.2-29.2-108.3-43c-22.4-8.6-32.7-25.8-32.7-49.9c0-110,0-220.1,0-331.8c0-1.7,0-25.8,0-48.1c-24.1-24.1-44.7-43-46.4-44.7c-89.4-96.3-175.4-194.3-263.1-290.6c-1.7-1.7-3.4-3.4-5.2-6.9c259.6,0,517.5,0,778.8,0C883.4,88.6,881.7,92,878.2,95.4z\"/>\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\t)\r\n}\r\n\r\nexport default Filter","import React, {useState} from 'react';\r\n\r\nconst FilterOptions = ({ uniqueLocations, filterTimeline, isVisible }) => {\r\n\tconst [filterCategory, setFilterCategory] = useState(false)\r\n\tconst [params, setParams] = useState({locations: []})\r\n\r\n\tconst chooseCategory = (e) => {\r\n\t\tif (e.target.checked) {\r\n\t\t\tsetFilterCategory(e.target.value)\r\n\t\t} else {\r\n\t\t\tsetFilterCategory(false)\r\n\t\t\tclearCategory(e.target.value)\r\n\t\t}\r\n\t}\r\n\r\n\tconst clearCategory = (category) => {\r\n\t\tconst newParams = {...params, [category]: []}\r\n\t\tsetParams(newParams)\r\n\t\tfilterTimeline(newParams)\r\n\t\tdocument.querySelectorAll(`#${category}-fields input`).forEach(input => input.checked = false)\r\n\t}\r\n\r\n\tconst handleClick = (category, e) => {\r\n\t\tconst newParams = {...params}\r\n\r\n\t\tif (e.target.checked && !newParams[category].includes(e.target.value)) {\r\n\t\t\t// Add checked item to params\r\n\t\t\tnewParams[category].push(e.target.value)\r\n\t\t} else {\r\n\t\t\t// Remove unchecked item from params\r\n\t\t\tnewParams[category] = newParams[category].filter(item => item !== e.target.value)\r\n\t\t}\r\n\r\n\t\tsetParams(newParams)\r\n\t\tfilterTimeline(newParams)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form style={{display: isVisible ? 'grid' : 'none'}} id='filters'>\r\n\t\t\t<fieldset id='filter-by'>\r\n\t\t\t\t<legend>Filter By</legend>\r\n\t\t\t\t<label htmlFor='locations'>\r\n\t\t\t\t\tVenue\r\n\t\t\t\t\t<input type='checkbox' id='locations' name='filter-category' value='locations' onClick={chooseCategory} />\r\n\t\t\t\t</label>\r\n\t\t\t</fieldset>\r\n\t\t\t{filterCategory === 'locations' && (\r\n\t\t\t\t<fieldset id='locations-fields'>\r\n\t\t\t\t\t<legend>Location</legend>\r\n\t\t\t\t\t<label htmlFor='clear-all-locations'>\r\n\t\t\t\t\t\t<input type='checkbox' id='clear-all-locations' value='clear-all-locations' onClick={(e) => clearCategory('locations')}/>\r\n\t\t\t\t\t\tClear all location filters (see all locations)\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t{uniqueLocations.map((location, index) => (\r\n\t\t\t\t\t\t<label key={index} htmlFor={'location'+index}>\r\n\t\t\t\t\t\t\t<input type='checkbox' id={'location'+index} value={location} onClick={(e) => handleClick('locations', e)}/>\r\n\t\t\t\t\t\t\t{location}\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</fieldset>\r\n\t\t\t)}\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default FilterOptions;","import { useEffect, useState } from \"react\"\r\n\r\nconst DataCollector = ({children}) => {\r\n\t// Get the time of page load as a timestamp\r\n\tconst timeOfPageLoad = Date.now()\r\n\r\n\t// Get the user agent\r\n\tconst userAgent = navigator.userAgent\r\n\r\n\t// Get the user's IP address and location from the ipdata API\r\n\tconst [ipData, setIpData] = useState(null)\r\n\tuseEffect(() => {\r\n\t\tconst fetchIpData = async () => {\r\n\t\t\tconst apiKey = 'c0ed918b293a8b219647d2f7f0740aa10629b0628bc44f389d5dcaab'\r\n\t\t\tconst response = await fetch(`https://api.ipdata.co?api-key=${apiKey}`)\r\n\t\t\tconst json = await response.json()\r\n\t\t\tsetIpData(json)\r\n\t\t}\r\n\r\n\t\tfetchIpData()\r\n\t}, [])\r\n\r\n\t// Record all user interactions with the page\r\n\tconst [events, setEvents] = useState([])\r\n\r\n\tconst recordEvent = (e) => {\r\n\t\tconst event = {\r\n\t\t\ttype: e.type,\r\n\t\t\ttarget: e.target,\r\n\t\t\ttime: Date.now() - timeOfPageLoad\r\n\t\t}\r\n\r\n\t\tsetEvents(prevEvents => {\r\n\t\t\treturn [...prevEvents, event]\r\n\t\t})\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\t['click', 'scroll'].forEach(eventType => {\r\n\t\t\twindow.addEventListener(eventType, (e) => {\r\n\t\t\t\trecordEvent(e)\r\n\t\t\t})\r\n\t\t})\r\n\t}, [])\r\n\r\n\t// Prepare user data object to send to db\r\n\tconst makeUserDataObject = () => {\r\n\t\t// Calculate time on page\r\n\t\tconst timeOnPage = Date.now() - timeOfPageLoad\r\n\r\n\t\t// Return user data object\r\n\t\treturn {\r\n\t\t\tuserAgent,\r\n\t\t\ttimeOnPage,\r\n\t\t\tipData,\r\n\t\t\tevents\r\n\t\t}\r\n\t}\r\n\r\n\t// Send data to db when user leaves the page\r\n\tconst sendData = () => {\r\n\t\t// Make user data object\r\n\t\tconst userData = makeUserDataObject()\r\n\r\n\t\t// Send data to db\r\n\t\tfetch('https://z32mbfotsov62vonmya6xsnyz40lydhm.lambda-url.us-east-2.on.aws/', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(userData),\r\n\t\t\tkeepalive: true\r\n\t\t})\r\n\t}\r\n\r\n\t// Add event listener to send data when user leaves the page\r\n\tuseEffect(() => {\r\n\t\twindow.removeEventListener('beforeunload', sendData)\r\n\t\twindow.addEventListener('beforeunload', sendData)\r\n\t}, [ipData, events])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{children instanceof Array ? {...children} : children}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default DataCollector;","import React, { useState } from 'react';\r\nimport Datepicker from './components/Datepicker';\r\nimport Timeline from './components/Timeline';\r\nimport Filter from './components/Filter';\r\nimport FilterOptions from './components/FilterOptions';\r\nimport stringSimilarity from 'string-similarity';\r\nimport DataCollector from './components/DataCollector';\r\n\r\nconst App = () => {\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [events, setEvents] = useState(null)\r\n\tconst [filteredEvents, setFilteredEvents] = useState(null)\r\n\tconst [expandedSection, setExpandedSection] = useState(null)\r\n\tconst [uniqueLocations, setUniqueLocations] = useState(null)\r\n\r\n\tconst filterTimeline = (params) => {\r\n\t\tlet eventsArr = [...events]\r\n\t\t\r\n\t\t// Filter events by location\r\n\t\tif (params.locations.length > 0) {\r\n\t\t\teventsArr = eventsArr.filter(event => {\r\n\t\t\t\treturn params.locations.includes(event.venue) ||\r\n\t\t\t\t\tparams.locations.some(location => {\r\n\t\t\t\t\t\treturn stringSimilarity.compareTwoStrings(location, event.venue) > 0.9\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tsetFilteredEvents(eventsArr)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<DataCollector>\r\n\t\t\t<main className={isLoading ? 'loading' : ''}>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h1>Shows In Town</h1>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t{isLoading && <p className='subtitle'>Finding live music in Louisville...</p>}\r\n\t\t\t\t\t{!isLoading && (\r\n\t\t\t\t\t\t<div className='subheading'>\r\n\t\t\t\t\t\t\t<p className='subtitle'>live music in Louisville</p>\r\n\t\t\t\t\t\t\t<div className='options-wrapper'>\r\n\t\t\t\t\t\t\t\t<Filter expandedSection={expandedSection} setExpandedSection={setExpandedSection} />\r\n\t\t\t\t\t\t\t\t<Datepicker />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</header>\r\n\t\t\t\t<section id='expanded-section'>\r\n\t\t\t\t\t<FilterOptions uniqueLocations={uniqueLocations} filterTimeline={filterTimeline} isVisible={expandedSection === 'filter-options'}/>\r\n\t\t\t\t</section>\r\n\t\t\t\t<Timeline setIsLoading={setIsLoading} setEvents={setEvents} events={filteredEvents || events} setUniqueLocations={setUniqueLocations} />\r\n\t\t\t\t{!isLoading && <a href=\"#top\" id='topLink'>Top ↑</a>}\r\n\t\t\t</main>\r\n\t\t</DataCollector>\r\n\t)\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);"],"sourceRoot":""}